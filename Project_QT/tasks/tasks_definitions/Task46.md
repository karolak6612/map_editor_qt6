**Task46: Refactor `MainToolBar` UI Using `QToolBar` (Populate Actions, Enhance Controls, Interactions)**
- Task: **Implement any missing controls on the `MainToolBar` (from Task 9) and finalize interactions for current map/zoom context from `wxwidgets`, ensuring `QAction`s and integrated controls are fully populated and their signals trigger placeholder application logic. Also implement layout/state restoration.**
    - **Analyze Existing `MainToolBar`:** Build upon the `QToolBar` work from Task 9 in `Project_QT/src`.
    - **Populate Missing Controls & Actions:** Add any `QAction`s (with icons) or integrated widgets (`QComboBox` for layers, `QSpinBox`/`QSlider` for zoom) that were part of the original `MainToolBar` but not added in Task 9. Ensure all tool buttons specified in `wxwidgets` `CreateToolbar` logic are present.
    - **Action Listeners / Signal Connections:**
        -   Connect `QAction::triggered()` signals (for buttons) and relevant widget signals (e.g., `QComboBox::currentIndexChanged`, `QSpinBox::valueChanged`) to slots in `MainWindow` or dedicated controllers.
        -   These slots should, for now, primarily log the action or value change, and conceptually update the current map or `MapView` state (e.g., selected layer, zoom level, active tool/brush). The goal is that these toolbar controls properly dispatch changes via signals that will later affect `MapView` or other application components.
    - **Hotkey / Accelerator Keys:** If any key shortcuts (accelerator keys) were intrinsically tied to these toolbar controls in `wxwidgets` (beyond standard menu accelerators also on `QAction`s), ensure they are supported, possibly via `QShortcut` if not inherent to the `QAction`. Update the hotkey management system if one exists.
    - **Layout and State Restoration (from `g_settings`):**
        -   Implement logic to save and restore the `MainToolBar`'s state (e.g., visibility of sections, floating state if toolbars can float, last used values for controls like zoom/layer) using the application settings system (placeholder `g_settings` access, full implementation in Task 97).
        -   This includes migrating `MainToolbar::SavePerspective` logic if that function in `wxwidgets` saved UI state.
        -   Handle original settings like `SHOW_TOOL*`, `LAYOUT_*` by mapping them to Qt toolbar properties or actions.
    - **Specific Button Events:** Migrate event handling for buttons like `SelectBrush` (which might trigger a brush selection dialog or activate a brush tool) and brush shape toggle events if these were direct toolbar buttons in `wxwidgets`.
    - **Distinct Interactive Unit:** `MainToolBar` should function as a distinct interactive unit, primarily interacting with `MainWindow` or core controllers via signals or public methods, not relying on overly complex direct manipulation from other classes. Brushes/tools are usually selected, and this selection might trigger signals that `MapView` or `BrushManager` listen to.
    - **`Task46.md` must provide the complete list of all original `MainToolBar` items, their functions, corresponding `ActionID`s or event handlers from `wxwidgets`, the logic of `CreateToolbar` and `SavePerspective`, and any state variables that need persistence.**
