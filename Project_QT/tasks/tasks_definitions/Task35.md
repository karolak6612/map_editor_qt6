**Task35: Implement `SpriteManager` (SPR/DAT Loaders - Full Pixel Data, Headers, ImageSpace, ItemData Linking)**
- Task: **Implement comprehensive `.spr` (Tibia sprite format) and `.dat` (Tibia data format, often linked with sprites) loading functionality within the `SpriteManager` class in `project_qt`. This manager is responsible for parsing these game-specific file formats and making sprite image data available, typically for `GameSprite` objects.**
    - **Analyze Existing Sprite Loaders:** Review and integrate with or replace any existing `.spr`/`.dat` loading logic in `Project_QT/src`.
    - **SPR File Parsing:**
        -   **`readTibiaSprHeader()`:** Accurately parse the `.spr` file header (signature, sprite count, version information). The version can be critical for subsequent parsing logic. This should be based on the `wx` RME's logic or other known .spr specifications as detailed in `Task35.md`.
        -   **Sprite Pixel Data:** Implement logic to read individual sprite image data by sprite ID. This includes:
            -   Handling sprite addressing (offsets within the .spr file).
            -   Decompressing sprite pixel data if RLE (Run-Length Encoding) or other compression was used by the specific sprite version.
            -   Reconstructing the pixel data into a `QImage` (initially targeting 32x32 resolution by default, unless the header or `ImageSpace` concept from `wxwidgets` specified otherwise). The `QImage` should have the correct format (e.g., `QImage::Format_ARGB32`).
            -   Handling transparency (alpha channel data or color keying if used in .spr).
    - **DAT File Parsing (related to Sprites and basic ItemData):**
        -   **`readTibiaDatHeader()`:** Parse the `.dat` file header to understand its version and the counts of different entity types it contains (e.g., item types, outfits, effects, missiles â€“ these counts might inform `ItemManager` or other managers).
        -   **Basic ItemData Linking:** Although full item property parsing is `ItemManager`'s role, `SpriteManager` (if it was responsible in `wxwidgets`, or if sprite IDs are directly linked to `ItemData` attributes in the DAT file) must parse enough information from the `.dat` file to establish a preliminary link between sprite IDs and basic item data. This might involve populating a simple `ItemData` struct (defined in `Project_QT/src`) with fundamental attributes like item ID, sprite IDs associated with it, and flags directly available from the DAT. `SpriteManager` would then provide this basic `ItemData` when a sprite is queried, which `ItemManager` later enriches. This avoids `SpriteManager` needing full knowledge of `.otb`/`items.xml`.
    - **`ImageSpace` Concept:** If `wxwidgets` used an `ImageSpace` concept or struct to hold raw sprite pixel data or manage sprite sheets before conversion to displayable formats, replicate this data structure and its population logic if it's beneficial for intermediate storage or further processing.
    - **Version Handling:** Store the SPR header version or related client version from these loaders, as it may affect how sprites are interpreted or used.
    - **Integration with `GameSprite`:** The data loaded by `SpriteManager` (e.g., `QImage`s, animation parameters if any were in SPR/DAT) will be used to construct or populate `GameSprite` objects. This task focuses on the loading part; `GameSprite` uses the loaded data.
    - **Helper Structures & Enums:** Port any enums for flags read from these files (e.g., `ItemProperty` flags if some basic ones were in DAT) or simple structs for `ItemData` as needed for this initial parsing stage.
    - **Error Handling:** Implement robust error handling for file I/O and parsing (e.g., incorrect signatures, unexpected EOF).
    - **`Task35.md` is extremely important. It must specify: the exact byte-level structure of the `.spr` and relevant parts of the `.dat` files for different client versions; RLE decoding algorithms if applicable; how sprite addresses and transparency were handled; the structure of any intermediate `ImageSpace` or `ItemData` read by the original loaders; and how `wxwidgets`' `SpriteLoader` classes (if any) were instantiated based on version information.**
