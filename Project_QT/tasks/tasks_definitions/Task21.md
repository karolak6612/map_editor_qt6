**Task21: Implement Core `ClipboardData` Functionality (Data Serialization/Deserialization for Copy/Paste)**
- Task: **Migrate the `ClipboardData` class or equivalent logic from `wxwidgets`, concentrating on the data storage, serialization, and retrieval aspects required for tile/item copy, cut, and paste operations. This task focuses on preparing the *data payload* for the clipboard, not direct interaction with the system clipboard UI yet.**
    - **Analyze Existing `ClipboardData`:** Review any clipboard-related code or data structures in `Project_QT/src` and integrate or refactor as necessary.
    - **Data Representation:** Define how a collection of `Tile` objects (including their full state: items, creatures, ground, flags, attributes) will be represented when "copied." This internal representation should be comprehensive.
    - **Serialization to Transferable Format:** Implement methods to serialize this collection of `Tile` data into a transferable format. **Ideally, use `QJsonDocument` (with `QJsonObject` for each tile and `QJsonArray` for items/attributes within tiles) as the primary format for later robust recreation of `Tile`/`Item` objects during a paste operation.** Alternatively, if `wxwidgets` used a specific binary or custom text format that is easier to replicate initially, that can be a starting point (details in `Task21.md`).
    - **Core Methods:**
        -   `copyData(const TileSelection& selection, Map* map)`: This method (or equivalent) takes the current selection of tiles from the map, extracts all necessary data from each selected `Tile` (including all its items, creatures, and tile-specific properties), and serializes it into the chosen format (e.g., `QJsonDocument`).
        -   `QByteArray getSerializedData() const`: Returns the serialized data (e.g., JSON as a byte array).
        -   `setDataFromSerialized(const QByteArray& data)`: Takes serialized data and reconstructs the internal representation of copied tiles.
        -   (Conceptual) `pasteData(Map* map, const QPoint& targetPos, TileSelection& outPastedSelection)`: A placeholder for logic that would deserialize the stored data and apply it to the map at a target position, which involves creating/modifying `Tile` objects. The actual map modification and command creation is later.
    - **Property Preservation:** Ensure the serialization process maintains all critical properties of tiles and their contained items/creatures. Consider if `ClipboardData` should handle relative tile offsets from the original selection for correct pasting, or if it just copies a raw block of tiles. This also covers whether entire `Item` objects are copied/cut from their original tiles, or if only specific parameters/IDs are transferred, especially how the `SelectionBrush` class might have specialized this.
    - **System Clipboard Deferred:** Direct interaction with Qt's `QClipboard` (`QApplication::clipboard()`) to put/get this serialized data onto the actual system clipboard is a subsequent step. This task ensures the *data package* is ready.
    - **`Task21.md` must detail the exact structure of the data payload (e.g., expected JSON schema if using JSON), how tile properties and item attributes were originally captured, and any specific considerations for cutting vs. copying if behavior differed.**
