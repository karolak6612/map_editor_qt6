**Task43: Migrate `CarpetBrush` structure, item placement, and `getCarpet` logic**
- Task: **Implement the `CarpetBrush` class in `project_qt`, inheriting from `Brush` (Task 36). This brush is responsible for placing carpet items, potentially with specific rules for how they tile or interact with borders/walls.**
    - **Analyze Existing `CarpetBrush`:** Review and integrate with any existing carpet-related brush or item placement logic in `Project_QT/src`.
    - **Data Loading and Parameterization:** Carpet data (e.g., item IDs for different carpet pieces/patterns) should be directly loadable on `BrushManager::createBrush("CarpetBrush", ...)` or be accessible via `ItemManager` if carpets are standard items. This contrasts with how `GroundBrush` might have its properties set. The current `Item` selected by the palette (if using a "carpet tileset") will define the carpet to be placed.
    - **`draw()` Method Implementation (Carpet Item Placement):**
        -   The `draw()` method should conceptually place the selected carpet `Item`(s) on the target `Tile`.
        -   The logic for placing carpet items might be similar to how `DoorBrush` sets a specific item type, rather than modifying a base terrain like `GroundBrush`. The `CarpetBrush` might store the ID of the carpet item to place.
    - **Wall/Border Interaction (`tile->cleanBorders()` context):**
        -   The original wall tile creation method had multiple forms, sometimes using only a `GroundBrush` ID if it was an explicit border rather than a wall. Consider if `CarpetBrush` needs to interact with similar data via the general `Brush` type (e.g., for an "BorderBrush" concept).
        -   If placing carpets affects existing borders (e.g., carpets going under or up to walls), placeholder logic related to `tile->cleanBorders()` or interaction with `BorderBlocks::autoBorder` in tile calculations should be included if applicable from `wxwidgets` and compatible with newer designs.
    - **`getCarpet` Methods / Signals:** Implement or port `getCarpet()`-like methods (or add required signals from the `Tile` or `Map`) if `MapView`/`Tileset` UIs used these to check `Tile` state before allowing `CarpetBrush` to operate, or to update UI elements.
    - **View State Considerations:** Ensure the current map view configuration (e.g., visibility of other layers) is notionally passed or accessible when placing carpets, so new `Tile`/items do not contain out-of-view floors/positions if that was a behavior in the `wx` implementation (which used `GetCursorPosition()` for relative/actual coordinates). This might affect whether `add/removeItem` calls signal back a changed tile if the location wasn't visible. Avoid clearing or overriding the whole `MapView` display on tiles unless an edit operation is occurring or something triggers an item update that requires a full refresh. The original `wxwidgets Tile` had separated update cases if `Map` or `MapScene` (in `project_qt`) now handles tile redraw.
    - **`Task43.md` must detail how carpet items were defined/selected, any rules for tiling or interaction with existing map elements (walls, borders), and the specifics of `getCarpet` or similar state-checking methods from the original implementation.**
