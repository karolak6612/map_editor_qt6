**Task58: Implement Custom `QGraphicsItems` (Selection, Waypoint, Spawn, Item/Creature Visuals on `MapTileItem`)**
- Task: **Implement specialized `QGraphicsItem` subclasses for visually representing map selection, waypoints, and spawn areas on the `QGraphicsScene` (`MapScene`). Also, refine how individual `Item`s/`Creature`s are rendered *as part of* or *by* `MapTileItem` if they require custom `QGraphicsItem` logic beyond what `MapTileItem::paint()` drawing the `Tile`'s content provides.**
    - **Analyze Existing `QGraphicsItem` Usage:** Build upon any `QGraphicsItem`s created in Task 23 (`MapTileItem`) or other placeholder visual tasks.
    - **`SelectionItem` (`QGraphicsItem` for Selection):**
        -   Create a `QGraphicsItem` (e.g., `SelectionRubberBandItem`) to display the current map selection area (which could be a single rectangle for area select, or highlight individual selected `MapTileItem`s).
        -   This item should update its appearance and geometry based on changes in the `Selection` object (Task 17). It could draw a rubber-band rectangle during drag-selection in `MapView` or change the appearance (e.g., border, overlay) of selected `MapTileItem`s themselves if preferred.
    - **`WaypointItem` (`QGraphicsItem` for Waypoints):**
        -   Create a `QGraphicsItem` subclass to visually represent a `Waypoint` (Task 20/63/71) on the map (e.g., a small marker, icon, or colored circle).
        -   Its position should be determined by the `Waypoint`'s map coordinates. It should support standard `QGraphicsItem` scaling and be clickable for interaction (selection, editing).
    - **`SpawnItem` (`QGraphicsItem` for Spawns):**
        -   Create a `QGraphicsItem` subclass for visualizing `Spawn` points or areas (Task 19/87). This could be a marker at the spawn center, a semi-transparent circle representing its radius, or text displaying creature types.
    - **Item/Creature Rendering Strategy on `MapTileItem`:**
        -   Evaluate if individual `Item`s or `Creature`s on a `Tile` need to be their *own* child `QGraphicsItem`s parented to `MapTileItem` for finer-grained interaction, hover effects, or independent transformations *within* a tile.
        -   If not (i.e., `MapTileItem::paint()` iterates its `Tile`'s contents and draws them directly using `QPainter` via `Tile::draw()` -> `Item::draw()`), then this task ensures that `Item::draw()` and `Creature::draw()` (when they render full sprites) are correctly called and positioned by `MapTileItem::paint()`.
    - **`MapScene` Updates:** Implement logic for how `Map` or `Selection` changes trigger updates (add, remove, property changes) for these specialized `QGraphicsItems` in the `MapScene`. If items are removed from a tile, their corresponding graphics item must be removed from the scene if they were individual child items.
    - **Visual State Updates:** Ensure `MapView` or specific tools can set states on these `MapItem`s for visual feedback (e.g., highlighting a `WaypointItem` when it's selected by a waypoint editing tool, similar to `wxMapCanvas` selection highlighting).
    - **Special Map Type Indicators:** For features that only draw indicators (like `Item->has*ID`/flags from `TileMap` that the original `wxMap` displayed as overlays for `zoneId`s or `House` borders in specific shader modes), determine the strategy:
        -   Use dedicated `QGraphicsItem`s (like `ZoneBorderItem`) added to the scene.
        -   Have `MapTileItem::paint()` draw these overlays directly based on `Tile`/`Item` attributes, possibly using `QGraphicsEffect` or `QPainter` on the tile's rendering if easier than custom `QGraphicsItems` from palette/brushes.
        -   Prefer generic `QGraphicsItems` that get their color/type from properties on `Tile`/`Item` rather than brushes having specific render functions for these, unless a `GameSprite` representation is more suitable.
    - **`Task58.md` must describe the visual appearance and behavior of the original selection highlighting, waypoint markers, spawn area visualizations, and any special item/tile overlays (like house borders), to guide the implementation of their `QGraphicsItem` equivalents.**
